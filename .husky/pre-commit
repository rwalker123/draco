#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks for Draco Sports Manager..."

# Run backend checks
echo "ğŸ“¦ Checking backend..."
cd draco-nodejs/backend
npx lint-staged
BACKEND_EXIT_CODE=$?

# Run frontend checks
echo "ğŸ¨ Checking frontend..."
cd ../frontend
npx lint-staged
FRONTEND_EXIT_CODE=$?

# Return to root directory
cd ../..

# Check if either failed
if [ $BACKEND_EXIT_CODE -ne 0 ] || [ $FRONTEND_EXIT_CODE -ne 0 ]; then
    echo "âŒ Pre-commit checks failed"
    exit 1
fi

echo "âœ… All pre-commit checks passed" 