@model SportsManager.ViewModels.AccountViewModel
@using System.Web.Optimization;

@{
    ViewBag.Title = @Model.AccountName + " Umpires";
}

@section head
{
@Styles.Render("~/Content/themes/base/css")
<style type="text/css">
    img.over {
        border: 2px dashed #000;
    }

    img {
        border: 2px solid #fff;
    }

    h3.userHeader
    {
        font-size:24px;
    }
    .divLabel {
        display: inline-block;
        width: 125px;
    }

    .formLine {
        margin: 5px;
        margin-bottom: 10px;
    }

</style>
}

<div class="jumbotron">
    <h1>@ViewBag.Title.</h1>
    <p class="help-block">Define umpires for the league.</p>
</div> <!-- content-wrapper -->

<h3 class="help-block" style="display: inline-block" >Search for users to add as umpires. If this is a new umpire, 
    add them as a </h3><a class="btn btn-primary" style="margin-left: 5px; margin-right: 5px; margin-top: -6px" href='@Url.Action("Users", "Account", new { area = "", accountId = Model.AccountId }, null)'>user</a><h3 class="help-block" style="display: inline-block">first.</h3>

<br /><span>(type last name to begin search)</span><br />
<input type="text" style="width: 400px; margin-right: 5px" data-bind="autocomplete: { source: getPlayers, select: selectPlayer, minLength: 1 }"/><button type="button" class="btn btn-primary" data-bind="enable: hasSelectedPlayer, click: addUmpire">Add</button>

<div id="accordion">
    <div data-bind="foreach: umpires">
        <h3 class="userHeader">
            <img src='/images/busy.gif'
                style="position: absolute;z-index:1;margin-left:35px;margin-top:25px;border: none;display:none" />
            <img class='fileupload' 
            style="width: 80px; height: 60px; position: relative;vertical-align:middle;" 
            data-bind="imageUploader: fileUploaderUrl, attr: { src: photoUrl }"
            alt="upload photo" />
            <a href="#" data-bind="text: fullName"></a>
        </h3>
        <div>
            <form data-bind="attr: { id: id }">
                <div class="contactView" data-bind="template: 'viewUserDetailsTemplate'"></div>
            </form>
        </div>
    </div>
</div>


@section scripts 
{
@Scripts.Render("~/bundles/knockout")

<script type="text/javascript" src="~/Areas/Baseball/Scripts/umpires.js"></script>
<script type="text/javascript" src="~/Scripts/jQuery-File-Upload-jquery-ui/js/jquery.fileupload.js"></script>

<script id="viewUserDetailsTemplate" type="text/html">

    <div data-bind="with: details">
        <div class="formLine" data-bind="visible: email()">
            <div class='divLabel'>Email:</div><span data-bind="text: email"></span>
        </div>
        <div class="formLine" data-bind="visible: phone1()">
            <div class='divLabel'>Home Phone:</div> <span data-bind="text: phone1"></span>
        </div>
        <div class="formLine" data-bind="visible: phone2()">
            <div class='divLabel'>Cell Phone:</div> <span data-bind="text: phone2"></span>
        </div>
        <div class="formLine" data-bind="visible: phone3()">
            <div class='divLabel'>Work Phone:</div> <span data-bind="text: phone3"></span>
        </div>
        <div class="formLine" data-bind="visible: address() || city() || state() || zip()" style="vertical-align: top">
            <div class='divLabel'>Address:</div><span data-bind="text: address"></span><br />
            <div class='divLabel'></div><span data-bind="text: city"></span>, <span data-bind="text: state"></span> <span data-bind="text: zip"></span>
        </div>
    </div>
    <button type="button" class="btn btn-danger" data-bind="click: $parent.deleteUmpire">Remove</button>

</script>

<script type="text/javascript">
    $(document).ready(function () {
        initViewModel(@Model.AccountId);
    });
</script>
}
