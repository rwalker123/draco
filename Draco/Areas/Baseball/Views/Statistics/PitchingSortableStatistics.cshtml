@model dynamic

@{
	ViewBag.Title = "Pitching Sortable Statistics";
}

@section menu {
	@Html.Partial("_LeagueMenu")
}

@section head {
	<link href="@Url.Content("~/Content/jquery.jqGrid/ui.jqgrid.css")" rel="stylesheet" type="text/css" media="screen" />

}

<h2>@Model.SeasonName @Model.LeagueName Pitching Statistics</h2>


<table width="100%" id="list"></table>
<div id="pager"></div>

@section Scripts {
<script src="@Url.Content("~/Scripts/jquery.jqGrid/grid.locale-en.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.jqGrid/jquery.jqGrid.min.js")" type="text/javascript"></script>

<script type="text/javascript">
	$('#list>tbody>tr').live('mouseover', showTip)
						 .live('mouseoff', hideTip);

	function showTip() {

		var $row = $(this);
		//get tooltip from first hidden cell
		var tipText = $row.children(':eq(0)').text()
		//append tipText to tooltip and show

	}


	function hideTip() {

		//hide tip

	}


	$(document).ready(function () {
		$("#list").jqGrid({
			url: '@Url.Action("PitchingStatisticsGridData", "Statistics", new { accountId = Model.AccountId, seasonId = Model.SeasonId, id = Model.LeagueId }, null )',
			datatype: 'json',
			mtype: 'GET',
			colNames: ['Player Name', 'W', 'L', 'S', 'IP', 'BF', 'H', 'R', 'ER', 'SO', 'BB', 'K/9', 'BB/9', 'OBA', 'SLG', 'WHIP', 'ERA'],
			colModel: [
			  { name: 'Player Name', index: 'PlayerName', width: 120, formatter: 'showlink', formatoptions: { baseLinkUrl: 'javascript:', showAction: "displayPlayer('", addParam: "');" }, sortable: false },
			  { name: 'W', index: 'W', width: 30 },
			  { name: 'L', index: 'L', width: 30 },
			  { name: 'S', index: 'S', width: 30 },
			  { name: 'IPDecimal', index: 'IPDecimal', width: 35 },
			  { name: 'BF', index: 'BF', width: 35 },
			  { name: 'H', index: 'H', width: 30 },
			  { name: 'R', index: 'R', width: 30 },
			  { name: 'ER', index: 'ER', width: 30 },
			  { name: 'SO', index: 'SO', width: 30 },
			  { name: 'BB', index: 'BB', width: 30 },
			  { name: 'K9', index: 'K9', width: 35, formatter: oneDecimalFormatter },
			  { name: 'BB9', index: 'BB9', width: 35, formatter: oneDecimalFormatter },
			  { name: 'OBA', index: 'OBA', width: 35, formatter: threeDecimalFormatter },
			  { name: 'SLG', index: 'SLG', width: 35, formatter: threeDecimalFormatter },
			  { name: 'WHIP', index: 'WHIP', width: 35, formatter: twoDecimalFormatter },
			  { name: 'ERA', index: 'ERA', width: 40, formatter: twoDecimalFormatter },
			],
			pager: '#pager',
			rowNum: 25,
			rowList: [25, 50, 75, 100],
			sortname: 'ERA',
			sortorder: 'asc',
			viewrecords: true,
			height: "100%",
			headertitles: true,
			beforeSelectRow: function (rowid, e) {
				return false; // this prevents the entire grid from being selected when clicking on a row.
			}
		});
	}); 

</script>

@Html.Partial("_DisplayPlayer")

}

