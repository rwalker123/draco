@model IEnumerable<SportsManager.Golf.ViewModels.GolfCourseViewModel>
@using SportsManager.Golf.ViewModels;

@{
    ViewBag.Title = "Courses";
}

<h1>@ViewBag.Title</h1>

<div id="BasicGrid">

@foreach (SportsManager.Golf.ViewModels.GolfCourseViewModel vm in Model)
{ 
    <div id="GolfCoursesGrid">
    <table>
    <tr><td>@vm.Name @Html.ActionLink("Edit", "Edit", "Courses", new { AccountId = ViewBag.AccountId, id = vm.CourseId }, null) @Html.ActionLink("Delete", "Delete", "Courses", new { AccountId = ViewBag.AccountId, id = vm.CourseId }, null)</td>
    @for (int i = 1; i <= vm.NumberOfHoles; i++)
    {
        <td>@i</td>
        if (i == 9)
        {
            if (vm.NumberOfHoles > 9)
            { 
                <td>Out</td>
            }
            else
            {
                <td>Total</td> 
            }
        }
    }
    
    @if (vm.NumberOfHoles > 9)
    { 
        <td>In</td>
        <td>Total</td>
    }

    </tr>
    <tr><td>Mens Par</td>
    @{
    int totalPar = 0;
    int sidePar = 0;
    int curIndex = 1;
    }

    @foreach (int mensPar in vm.MensPar)
    {
        <td>@mensPar</td>
        totalPar += mensPar;
        sidePar += mensPar;
        if (curIndex == 9)
        {
            <td>@sidePar</td> 
            sidePar = 0;
            if (vm.NumberOfHoles == 9)
            { 
                break;
            }
        }
        curIndex++;
    }

    @if (vm.NumberOfHoles > 9)
    {
        <td>@sidePar</td> 
        <td>@totalPar</td>
    }

    </tr>

    @{
    curIndex = 0;
    }
    <tr><td>Mens Handicap</td>
    @foreach (int mensHandicap in vm.MensHandicap)
    {
        <td>@mensHandicap</td>
        curIndex++;
        if (curIndex == 9)
        {
            <td></td> 
            if (vm.NumberOfHoles == 9)
            {
                break;
            }
        }
    }

    <td></td><td></td>

    </tr>

    <tr><td>Womens Par</td>
    @{
    totalPar = 0;
    sidePar = 0;
    curIndex = 1;
    }

    @foreach (int womensPar in vm.WomensPar)
    {
        <td>@womensPar</td>
        totalPar += womensPar;
        sidePar += womensPar;
        if (curIndex == 9)
        {
            <td>@sidePar</td> 
            sidePar = 0;
            if (vm.NumberOfHoles == 9)
            {
                break;
            }
        }
        curIndex++;
    }

    @if (vm.NumberOfHoles > 9)
    {
        <td>@sidePar</td> 
        <td>@totalPar</td>
    }

    </tr>

    @{
    curIndex = 0;
    }
    <tr><td>Womens Handicap</td>
    @foreach (int womensHandicap in vm.WomensHandicap)
    {
        <td>@womensHandicap</td>
        curIndex++;
        if (curIndex == 9)
        {
            <td></td> 
            if (vm.NumberOfHoles == 9)
            {
                break;
            }
        }
    }

    <td></td><td></td>

    </tr>


    @foreach (GolfTeeViewModel tee in vm.Tees)
    {
        curIndex = 0;
        int sideDistance = 0;
        int totalDistance = 0;
        
        <tr>
            <td>@tee.TeeColor
            @if (tee.MensRating > 0) { 
                <text>M: @tee.MensRating/@tee.MensSlope</text>
            }
            @if (tee.WomensRating > 0) { 
                <text>W: @tee.WomensRating/@tee.WomensSlope</text>            
            }
            
            
            </td> 

            @foreach (int holeDistance in tee.HoleDistances)
            {
                sideDistance += holeDistance;
                totalDistance += holeDistance;
                
                <td>@holeDistance</td>
                
                curIndex++;

                if (curIndex == 9)
                {
                    <td>@sideDistance</td> 
                    sideDistance = 0;
                    if (vm.NumberOfHoles == 9)
                    {
                        break;
                    }
                }
            }

            @if (vm.NumberOfHoles > 9)
            {
                <td>@sideDistance</td> 
                <td>@totalDistance</td>
            }

            <td>@Html.ActionLink("Edit", "Edit", "CourseTee", new { AccountId = ViewBag.AccountId, id = tee.TeeId }, null)</td>
            <td>@Html.ActionLink("Delete", "Delete", "CourseTee", new { AccountId = ViewBag.AccountId, id = tee.TeeId }, null)</td>
        </tr>        
    }

    <tr><td>@Html.ActionLink("Create Tee", "Create", "CourseTee", new { AccountId = ViewBag.AccountId, id = vm.CourseId }, null)</td></tr>
    </table>
    </div>
}

</div>

@Html.ActionLink("Create", "Create", "Courses", new { accountId = ViewBag.AccountId }, null)



@section scripts {

<script type="text/javascript">

</script>

}
